{% extends "auctions/layout.html" %}

{% block title %}Create Listing - Auctions{% endblock %}

{% block body %}
    <h2>Create New Listing</h2>

    {% if form.errors %}
        <div class="alert alert-danger">
            <h5>Please correct the following errors:</h5>
            {{ form.errors }}
        </div>
    {% endif %}

    <form method="post" class="mt-4">
        {% csrf_token %}
        
        <div class="form-group">
            <label for="title">Title</label>
            <input type="text" class="form-control" id="title" name="title" 
                   value="{{ form.title.value|default_if_none:'' }}" 
                   placeholder="Enter listing title" required maxlength="100">
            {% if form.title.errors %}
                <div class="text-danger">{{ form.title.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="description">Description</label>
            <textarea class="form-control" id="description" name="description" 
                      rows="4" placeholder="Describe your item" required>{{ form.description.value|default_if_none:'' }}</textarea>
            {% if form.description.errors %}
                <div class="text-danger">{{ form.description.errors }}</div>
            {% endif %}
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="starting_bid">Starting Bid ($)</label>
                    <input type="number" class="form-control" id="starting_bid" name="starting_bid" 
                           value="{{ form.starting_bid.value|default_if_none:'' }}" 
                           placeholder="0.01" min="0.01" step="0.01" required>
                    {% if form.starting_bid.errors %}
                        <div class="text-danger">{{ form.starting_bid.errors }}</div>
                    {% endif %}
                </div>
            </div>

            <div class="col-md-6">
                <div class="form-group">
                    <label for="category">Category</label>
                    <select class="form-control" id="category" name="category" required>
                        <option value="">Select a category</option>
                        {% for category in categories %}
                            <option value="{{ category.id }}" 
                                {% if form.category.value == category.id|stringformat:"s" %}selected{% endif %}>
                                {{ category.name }}
                            </option>
                        {% endfor %}
                    </select>
                    {% if form.category.errors %}
                        <div class="text-danger">{{ form.category.errors }}</div>
                    {% endif %}
                </div>
            </div>
        </div>

        <div class="form-group">
            <label for="image_url">Image URL (optional)</label>
            <input type="url" class="form-control" id="image_url" name="image_url" 
                   value="{{ form.image_url.value|default_if_none:'' }}" 
                   placeholder="https://example.com/image.jpg">
            <small class="form-text text-muted">Provide a URL to an image of your item</small>
            {% if form.image_url.errors %}
                <div class="text-danger">{{ form.image_url.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <button type="submit" class="btn btn-primary">Create Listing</button>
            <a href="{% url 'index' %}" class="btn btn-secondary ml-2">Cancel</a>
        </div>
    </form>

    <div class="mt-4">
        <h5>Tips for creating a great listing:</h5>
        <ul class="list-unstyled">
            <li><strong>Title:</strong> Be clear and descriptive</li>
            <li><strong>Description:</strong> Include condition, dimensions, and any flaws</li>
            <li><strong>Starting Bid:</strong> Set a reasonable starting price</li>
            <li><strong>Image:</strong> A good photo increases interest</li>
        </ul>
    </div>
{% endblock %}